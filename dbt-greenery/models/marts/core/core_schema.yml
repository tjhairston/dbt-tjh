version: 2

models:
  - name: dim_products
    description: "model contains product inforamtion"
    columns:
      - name: product_id
        description: primary key
        tests:
          - unique
          - not_null

  - name: dim_users
    description: "model contains customer information about each customer(user) includes: address and tenure information"
    columns:
      - name: user_guid
        description: primary key
        tests:
          - unique
          - not_null

      - name: customer_tenure
        description: "present (now) - created_at date"
        tests:
          - not_null


  - name: fact_orders
    description: "model contains order inforamation at the product level: including price, promotion, time to delivery, etc"
    columns:
      - name: order_guid
        description: primary key
        tests:
          - not_null
        relationships:
          to: ref('stg_order_item')
          field: order_guid
      - name: user_guid
        relationships:  
          to: ref('stg_users')
          field: user_guid
      - name: order_cost
        tests: 
          - not_null
          - positive_values
      - name: order_total
        tests:  
          - not_null
          - positive_values
      - name: promo_id
        relationships: 
          to: ref('stg_promos')
          field: promo_id
      - name: order_status
        tests:
          - not_null
          - accepted_values:
              values: ['pending', 'preparing', 'shipped', 'delivered']
      - name: quantity
        tests: 
          - not_null
          - positive_values
      - name: product_price
        tests: 
          - not_null
          - positive_values